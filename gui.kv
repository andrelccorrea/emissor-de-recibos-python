#:kivy 1.11
# converte as cores de HEX para o padrão rgba float do kivy
#:import rgba kivy.utils.rgba

# regras comuns a todas as telas
<TelaInicial, TelaCadastrarRecebedor, TelaCadastrarPagador, TelaConsultarPagadores, TelaCadastrarItens, TelaConsultarItens, TelaEmitirRecibo>:
    # cor de fundo
    canvas.before:
        Color: 
            rgba: rgba('#cc80ff')
        Rectangle:
            pos: self.pos
            size: self.size

# regras comuns aos botões
<Button>:
    background_color: rgba('#996633')
    # força a utilizar a altura informada
    size_hint_y: None
    height: '70dp'
    # força a utilizar a largura informada
    size_hint_x: None
    width: '100dp'
    # para o texto não extrapolar o tamanho do widget
    text_size: self.size
    halign: "center"
    valign: "center"

# regras das telas
<TelaInicial>:
    BoxLayout:
        orientation: 'vertical'
        FloatLayout:
            Image: 
                source: 'img/inicio.png'
                size_hint_x: None
                width: '150dp'
                height: '150dp'
                pos: 0, 120
            Label:
                # trava o comprimento em 400dp
                text_size: 420, None
                # ajusta o tamanho do label de acordo com a quantidade de texto
                size: self.texture_size
                text: '12345678901234567890123456790'
                # alinha o texto ao centro do label
                halign: 'center'
                # fonte baixada e configurada no arquivo .py
                font_name: 'AlexBrush'
                font_size: '65dp'
                pos: 40, 110
        BoxLayout:
            spacing: '2dp'
            orientation: 'horizontal'
            Button:
                text: 'Cadastrar\r\nRecebedor'
                # root.manager é a referência ao ScreenManager no .kv
                on_press:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'tela_cadastrar_recebedor'
            Button:
                text: 'Cadastrar\r\nPagador'
                on_press:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'tela_cadastrar_pagador'
            Button:
                text: 'Consultar\r\nPagadores'
                on_press:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'tela_consultar_pagadores'
            Button:
                text: 'Cadastrar\r\nItens'
                on_press:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'tela_cadastrar_itens'
            Button:
                text: 'Consultar\r\nItens'
                on_press:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'tela_consultar_itens'
            Button:
                text: 'Emitir\r\nRecibo'
                on_press:
                    root.manager.transition.direction = 'left'
                    root.manager.current = 'tela_emitir_recibo'

<TelaCadastrarRecebedor>:
    BoxLayout:
        Button:
            text: 'Voltar'
            on_press: 
                root.manager.transition.direction = 'right'
                root.manager.current = 'tela_inicial'
        Button:
            text: 'Fazer algo Cadastrar Recebedor'

<TelaCadastrarPagador>:
    BoxLayout:
        Button:
            text: 'Voltar'
            on_press: 
                root.manager.transition.direction = 'right'
                root.manager.current = 'tela_inicial'
        Button:
            text: 'Fazer algo Cadastrar Pagador'

<TelaConsultarPagadores>:
    BoxLayout:
        Button:
            text: 'Voltar'
            on_press: 
                root.manager.transition.direction = 'right'
                root.manager.current = 'tela_inicial'
        Button:
            text: 'Fazer algo Consultar Pagadores'

<TelaCadastrarItens>:
    FloatLayout:
        orientation: 'horizontal'
        # cria o label
        Label:
            text: 'Descrição'
            # cor da fonte
            color: 0, 0, 0, 1
            # define o tamanho do texto para o tamanho do label
            text_size: self.size
            # alinha para a esquerda
            halign: 'left'
            # alinha verticalmente para o meio do label
            valign: 'middle'
            # com 15% de largura e 09% de altura (medida de referencia é o layout)
            size_hint: (.15, .09)
            # posicionando a 1% da esquerda e 90% do rodapé (referência é rodapé esquerdo (0,0))
            pos_hint: {'x':.01, 'y':.90 }
            # cor de fundo (para referência)
            # canvas.before:
            #     Color:
            #         rgba: (.3, .6, .7, 1)
            #     Rectangle:
            #         pos: self.pos
            #         size: self.size
        # cria o input de texto
        TextInput:
            # id do label
            id: descricao
            # texto de ajuda
            hint_text: 'Informe a descrição do item'
            # foco por padrão nele
            focus: True 
            # permite mais de uma linha
            multiline: True
            # com 50% de largura e 30% de altura
            size_hint: (.50, .30)
            # posicionado a 01% da esquerda e 61% do rodapé
            pos_hint: {'x':.01, 'y':.61 }      
        # cria o label
        Label:
            text: 'Preço'
            # cor da fonte
            color: 0, 0, 0, 1
            # define o tamanho do texto para o tamanho do label
            text_size: self.size
            # alinha para a esquerda
            halign: 'left'
            # alinha verticalmente para o meio do label
            valign: 'middle'
            # com 15% de largura e 09% de altura (medida de referencia é o layout)
            size_hint: (.15, .09)
            # posicionando a 01% da esquerda e 50% do rodapé (referência é rodapé esquerdo (0,0))
            pos_hint: {'x':.01, 'y':.50 }
        # cria o input de números
        TextInput:
            # id do label
            id: preco
            # define o filtro para somente números
            input_filter: 'float'
            # texto de ajuda
            hint_text: 'Informe o preço do item'
            # permite mais de uma linha
            multiline: True
            # com 50% de largura e 10% de altura
            size_hint: (.50, .10)
            # posicionado a 01% da esquerda e 41% do rodapé
            pos_hint: {'x':.01, 'y':.41 }
    BoxLayout:
        Button:
            text: 'Voltar'
            on_press: 
                root.manager.transition.direction = 'right'
                root.manager.current = 'tela_inicial'
        Button:
            text: 'Gravar'
            width: '510dp'
            on_press: if root.validar_campos() == True: root.cadastrar_item() 
                    

<TelaConsultarItens>:
    BoxLayout:
        Button:
            text: 'Voltar'
            on_press: 
                root.manager.transition.direction = 'right'
                root.manager.current = 'tela_inicial'
        Button:
            text: 'Fazer algo Consultar Pagadores'

<TelaEmitirRecibo>:
    BoxLayout:
        Button:
            text: 'Voltar'
            on_press: 
                root.manager.transition.direction = 'right'
                root.manager.current = 'tela_inicial'
        Button:
            text: 'Fazer algo Emitir Recibo'